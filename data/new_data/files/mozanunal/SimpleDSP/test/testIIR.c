
#include "simpleDSP_iir.h"
#include <stdio.h>

float coefB[4] =
    {
        0.049533,
        0.1486,
        0.1486,
        0.049533};

float coefA[4] =
    {
        1,
        -1.1619,
        0.69594,
        -0.13776};

int input[255] =
    {
        450.527,
        -101.597,
        1031.37,
        -613.161,
        -1618.03,
        -115.808,
        -866.986,
        -1567.2,
        541.587,
        618.034,
        -263.146,
        1504.41,
        1504.41,
        -263.146,
        618.034,
        541.587,
        -1567.2,
        -866.986,
        -115.808,
        -1618.03,
        -613.161,
        1031.37,
        -101.597,
        450.527,
        2000,
        450.527,
        -101.597,
        1031.37,
        -613.161,
        -1618.03,
        -115.808,
        -866.986,
        -1567.2,
        541.587,
        618.034,
        -263.146,
        1504.41,
        1504.41,
        -263.146,
        618.034,
        541.587,
        -1567.2,
        -866.986,
        -115.808,
        -1618.03,
        -613.161,
        1031.37,
        -101.597,
        450.527,
        2000,
        450.527,
        -101.597,
        1031.37,
        -613.161,
        -1618.03,
        -115.808,
        -866.986,
        -1567.2,
        541.587,
        618.034,
        -263.146,
        1504.41,
        1504.41,
        -263.146,
        618.034,
        541.587,
        -1567.2,
        -866.986,
        -115.808,
        -1618.03,
        -613.161,
        1031.37,
        -101.597,
        450.527,
        2000,
        450.527,
        -101.597,
        1031.37,
        -613.161,
        -1618.03,
        -115.808,
        -866.986,
        -1567.2,
        541.587,
        618.034,
        -263.146,
        1504.41,
        1504.41,
        -263.146,
        618.034,
        541.587,
        -1567.2,
        -866.986,
        -115.808,
        -1618.03,
        -613.161,
        1031.37,
        -101.597,
        450.527,
        2000,
        450.527,
        -101.597,
        1031.37,
        -613.161,
        -1618.03,
        -115.808,
        -866.986,
        -1567.2,
        541.587,
        618.034,
        -263.146,
        1504.41,
        1504.41,
        -263.146,
        618.034,
        541.587,
        -1567.2,
        -866.986,
        -115.808,
        -1618.03,
        -613.161,
        1031.37,
        -101.597,
        450.527,
        2000,
        450.527,
        -101.597,
        1031.37,
        -613.161,
        -1618.03,
        -115.808,
        -866.986,
        -1567.2,
        541.587,
        618.034,
        -263.146,
        1504.41,
        1504.41,
        -263.146,
        618.034,
        541.587,
        -1567.2,
        -866.986,
        -115.808,
        -1618.03,
        -613.161,
        1031.37,
        -101.597,
        450.527,
        2000,
        450.527,
        -101.597,
        1031.37,
        -613.161,
        -1618.03,
        -115.808,
        -866.986,
        -1567.2,
        541.587,
        618.034,
        -263.146,
        1504.41,
        1504.41,
        -263.146,
        618.034,
        541.587,
        -1567.2,
        -866.986,
        -115.808,
        -1618.03,
        -613.161,
        1031.37,
        -101.597,
        450.527,
        2000,
        450.527,
        -101.597,
        1031.37,
        -613.161,
        -1618.03,
        -115.808,
        -866.986,
        -1567.2,
        541.587,
        618.034,
        -263.146,
        1504.41,
        1504.41,
        -263.146,
        618.034,
        541.587,
        -1567.2,
        -866.986,
        -115.808,
        -1618.03,
        -613.161,
        1031.37,
        -101.597,
        450.527,
        2000,
        450.527,
        -101.597,
        1031.37,
        -613.161,
        -1618.03,
        -115.808,
        -866.986,
        -1567.2,
        541.587,
        618.034,
        -263.146,
        1504.41,
        1504.41,
        -263.146,
        618.034,
        541.587,
        -1567.2,
        -866.986,
        -115.808,
        -1618.03,
        -613.161,
        1031.37,
        -101.597,
        450.527,
        2000,
        450.527,
        -101.597,
        1031.37,
        -613.161,
        -1618.03,
        -115.808,
        -866.986,
        -1567.2,
        541.587,
        618.034,
        -263.146,
        1504.41,
        1504.41,
        -263.146,
        618.034,
        541.587,
        -1567.2,
        -866.986,
        -115.808,
        -1618.03,
        -613.161,
        1031.37,
        -101.597,
        450.527,
        2000,
        450.527,
        -101.597,
        1031.37,
        -613.161,
        -1618.03};

IIR iir1;

int main()
{
    init(&iir1, 4, coefB, 4, coefA);
    printf("init finished\n");
    fflush(stdout);
    /*
    for (int i = 0; i < 46; i++) {
        printf("\ninit %f-  %d\n",fir1.H[i],fir1.n);
        fflush(stdout);
    }
    */

    for (int i = 0; i < 255; i++)
    {
        float a;
        a = filt(&iir1, input[i]);
        printf("%f\n", a);
        fflush(stdout);
    }

    printf("filter finished\n");
    fflush(stdout);
    return 0;
}
